---
title: IPluginConfig 接口
description: CounterStrikeSharp 插件配置系统的接口，用于处理插件的配置加载和解析
icon: Settings2
---

# IPluginConfig&lt;T&gt; 接口

`IPluginConfig<T>` 接口定义了插件配置的基本结构和行为。它使用泛型参数 `T` 来指定具体的配置类型，该类型必须实现 `IBasePluginConfig` 接口并提供无参构造函数。

## 命名空间

```csharp
namespace CounterStrikeSharp.API.Core
```

## 接口定义

```csharp
public interface IPluginConfig<T> where T : IBasePluginConfig, new()
```

## 类型参数

- `T`: 必须实现 `IBasePluginConfig` 接口并提供无参构造函数的配置类型

## 属性

### Config

获取或设置插件的配置实例。

```csharp
T Config { get; set; }
```

## 方法

### OnConfigParsed

当配置管理器解析完配置文件后调用此方法。

```csharp
void OnConfigParsed(T config)
```

#### 参数

- `config`: `T` - 已解析的配置实例

## 使用示例

```csharp
// 定义配置类
public class MyPluginConfig : BasePluginConfig
{
    [JsonPropertyName("EnableFeature")]
    public bool EnableFeature { get; set; } = true;
    
    [JsonPropertyName("ServerName")]
    public string ServerName { get; set; } = "默认服务器";
}

// 在插件中实现配置接口
public class MyPlugin : BasePlugin, IPluginConfig<MyPluginConfig>
{
    public MyPluginConfig Config { get; set; }
    
    public void OnConfigParsed(MyPluginConfig config)
    {
        // 配置文件已被解析，可以在这里处理配置
        if (config.EnableFeature)
        {
            Logger.LogInformation($"功能已启用，服务器名称：{config.ServerName}");
        }
    }
    
    public override void Load(bool hotReload)
    {
        // 配置在这里已经可用
        if (Config.EnableFeature)
        {
            // 使用配置中的设置
        }
    }
}
```

## 配置文件示例

```json
{
    "ConfigVersion": 1,
    "EnableFeature": true,
    "ServerName": "我的CS2服务器"
}
```

## 说明

- 实现此接口的插件将自动获得配置管理功能
- 配置文件会在插件加载时自动解析
- 配置文件默认位于插件目录的 `configs` 文件夹中
- 配置更改时会自动调用 `OnConfigParsed` 方法
- 可以在 `OnConfigParsed` 方法中验证和处理配置值
- 配置系统支持热重载，无需重启服务器即可更新配置