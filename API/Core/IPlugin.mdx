---
title: IPlugin 接口
description: CounterStrikeSharp 插件系统的核心接口，定义了插件的基本结构和生命周期
icon: Plugin
---

# IPlugin 接口

`IPlugin` 接口是每个 CounterStrikeSharp 插件必须实现的核心接口。它定义了插件的基本结构和生命周期方法。

## 命名空间

```csharp
namespace CounterStrikeSharp.API.Core
```

## 接口定义

```csharp
public interface IPlugin : IDisposable
```

## 属性

### ModuleName

获取插件名称。

```csharp
string ModuleName { get; }
```

### ModuleVersion

获取插件版本。

```csharp
string ModuleVersion { get; }
```

### ModuleAuthor

获取插件作者。

```csharp
string ModuleAuthor { get; }
```

### ModuleDescription

获取插件描述。

```csharp
string ModuleDescription { get; }
```

### ModulePath

获取插件DLL文件的路径。

```csharp
string ModulePath { get; internal set; }
```

### Logger

获取或设置日志记录器。

```csharp
ILogger Logger { get; set; }
```

### Localizer

获取或设置本地化器。

```csharp
IStringLocalizer Localizer { get; set; }
```

### CommandManager

获取或设置命令管理器。

```csharp
ICommandManager CommandManager { get; set; }
```

## 方法

### Load

插件加载时调用的方法。

```csharp
void Load(bool hotReload)
```

#### 参数

- `hotReload`: `bool` - 是否为热重载（在插件文件夹中替换DLL文件时为true）

#### 说明

此方法由 CounterStrikeSharp 在插件加载时调用，应被视为插件的构造函数。

### Unload

插件卸载时调用的方法。

```csharp
void Unload(bool hotReload)
```

#### 参数

- `hotReload`: `bool` - 是否为热重载

#### 说明

此方法由 CounterStrikeSharp 在插件卸载时调用。插件应在此方法中清理任何额外的资源。事件处理程序和监听器将自动注销。

### OnAllPluginsLoaded

所有插件加载完成后调用的方法。

```csharp
void OnAllPluginsLoaded(bool hotReload)
```

#### 参数

- `hotReload`: `bool` - 是否为热重载

#### 说明

此方法在所有插件加载完成后调用。为了方便起见，在重新加载或延迟加载后也会调用此方法。

### RegisterAllAttributes

注册所有特性。

```csharp
void RegisterAllAttributes(object instance)
```

#### 参数

- `instance`: `object` - 要注册特性的实例

### InitializeConfig

初始化插件配置。

```csharp
void InitializeConfig(object instance, Type pluginType)
```

#### 参数

- `instance`: `object` - 要初始化配置的实例
- `pluginType`: `Type` - 插件类型

## 使用示例

```csharp
public class MyPlugin : IPlugin
{
    public string ModuleName => "My Plugin";
    public string ModuleVersion => "1.0.0";
    public string ModuleAuthor => "Your Name";
    public string ModuleDescription => "A sample plugin for CounterStrikeSharp";

    public void Load(bool hotReload)
    {
        // 插件加载时的初始化代码
    }

    public void Unload(bool hotReload)
    {
        // 插件卸载时的清理代码
    }

    public void OnAllPluginsLoaded(bool hotReload)
    {
        // 所有插件加载完成后的代码
    }
}
``` 